<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Recorder - STAR Format Answers</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
</head>
<body>
    <div class="container" id="mainContainer">
        <!-- Compact Header for Interview Mode -->
        <header class="compact-header">
            <div class="header-left">
                <h1>üéôÔ∏è Meeting Recorder</h1>
                <span class="badge">AI: {{ ai_provider }}</span>
            </div>
            <div class="header-right">
                <button id="layoutToggle" class="btn btn-layout" title="Toggle Interview Layout">
                    <span class="icon">‚ö°</span> Interview Mode
                </button>
            </div>
        </header>

        <!-- Main Content Area -->
        <div class="content-wrapper" id="contentWrapper">
            <!-- Left Panel: Controls & Recording -->
            <div class="left-panel" id="leftPanel">
                <!-- Recording Controls (Compact) -->
                <section class="card recording-section-compact">
                    <div class="recording-controls-compact">
                        <!-- Live Mode Toggle -->
                        <div class="mode-selector-compact">
                            <label class="toggle-label-compact">
                                <input type="checkbox" id="liveModeToggle" class="toggle-input">
                                <span class="toggle-text-compact">
                                    <strong>LIVE MODE</strong>
                                </span>
                            </label>
                        </div>

                        <!-- Duration & Controls in one row -->
                        <div class="controls-row">
                            <select id="durationSelect" class="duration-select">
                                <option value="60">60s</option>
                                <option value="120" selected>120s</option>
                                <option value="180">180s</option>
                                <option value="1800">30 min</option>
                                <option value="2700">45 min</option>
                            </select>

                            <button id="startBtn" class="btn btn-primary btn-compact">
                                <span class="icon">‚óè</span> Start
                            </button>
                            <button id="stopBtn" class="btn btn-danger btn-compact" disabled>
                                <span class="icon">‚ñ†</span> Stop
                            </button>
                        </div>

                        <div id="recordingStatus" class="status-display-compact">
                            <div class="status-indicator"></div>
                            <span class="status-text">Ready</span>
                        </div>

                        <div id="progressBar" class="progress-bar-compact" style="display: none;">
                            <div class="progress-fill"></div>
                            <span class="progress-text">0s / 0s</span>
                        </div>
                    </div>
                </section>

                <!-- Live Transcript (Collapsible) -->
                <section class="card transcript-section-compact" id="transcriptSection" style="display: none;">
                    <div class="section-header">
                        <h3>üìù Transcript</h3>
                        <button class="collapse-btn" onclick="toggleSection('transcriptSection')">‚àí</button>
                    </div>
                    <div class="section-content">
                        <div id="transcriptDisplay" class="transcript-display-compact"></div>
                        <div class="transcript-meta">
                            <span id="transcriptionTime" class="meta-info"></span>
                        </div>
                    </div>
                </section>

                <!-- Live Mode Sections -->
                <section class="card live-section-compact" id="liveSection" style="display: none;">
                    <div class="section-header">
                        <h3>‚ö° Live Transcript</h3>
                        <span class="live-badge-small">üî¥ LIVE</span>
                    </div>
                    <div id="liveTranscriptDisplay" class="live-transcript-display-compact">
                        <p class="placeholder-text">Listening...</p>
                    </div>
                    <span id="liveStats" class="live-stats-compact">Ready</span>
                </section>

                <!-- Placeholder for Zoom/Meet -->
                <div class="meeting-placeholder" id="meetingPlaceholder">
                    <div class="placeholder-content">
                        <div class="placeholder-icon">üìπ</div>
                        <h3>Position Your Meeting Here</h3>
                        <p>Move your Zoom/Meet window to fill this space</p>
                        <p class="small-text">Or use Interview Mode for side-by-side layout</p>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Q&A (Main Focus) -->
            <div class="right-panel" id="rightPanel">
                <!-- Live Questions & Answers -->
                <section class="card qa-main-section" id="qaMainSection">
                    <div class="qa-header">
                        <h2>üí° Questions & Answers</h2>
                        <span class="qa-subtitle">Latest on top ‚Ä¢ STAR Format</span>
                    </div>

                    <!-- Live Q&A for Live Mode -->
                    <div id="liveQuestionsContainer" class="live-questions-main" style="display: none;">
                        <p class="placeholder-text">Questions will appear here as they're detected...</p>
                    </div>

                    <!-- Standard Q&A Container -->
                    <div id="answersContainer" class="answers-container-main">
                        <p class="placeholder-text">Start recording to see questions and answers appear here automatically!</p>
                    </div>
                </section>

                <!-- Manual Question Input (Collapsible) -->
                <section class="card manual-qa-section" id="manualQASection" style="display: none;">
                    <div class="section-header" onclick="toggleSection('manualQASection')">
                        <h3>‚úçÔ∏è Ask Manually</h3>
                        <button class="collapse-btn">‚àí</button>
                    </div>
                    <div class="section-content">
                        <div class="question-input-group-compact">
                            <input type="text" id="questionInput" class="question-input-compact"
                                   placeholder="Type a question...">
                            <button id="askBtn" class="btn btn-primary btn-compact">Ask</button>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <footer class="compact-footer">
            <p>Interview Assistant | Press <strong>Interview Mode</strong> for side-by-side layout</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/live_mode.js') }}"></script>
    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
    <script src="{{ url_for('static', filename='js/layout.js') }}"></script>
</body>
</html>
